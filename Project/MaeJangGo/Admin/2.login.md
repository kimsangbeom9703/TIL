# 로그인 정리

## main.tsx
```tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import {BrowserRouter, Routes, Route, Navigate, Outlet} from 'react-router-dom'
import App from './App'
import Login from './pages/Login'
import Users from './pages/Users'
import "./index.css";   // ✅ 전역 CSS 추가

function PrivateRoute() {
    const token = localStorage.getItem("access_token");
    return token ? <Outlet/> : <Navigate to="/login" replace/>;
}

ReactDOM.createRoot(document.getElementById('root')!).render(
    <React.StrictMode>
        <BrowserRouter>
            <Routes>
                <Route path="/login" element={<Login/>}/>
                <Route element={<PrivateRoute/>}>
                    <Route path="/users" element={<Users/>}/>
                    <Route path="/" element={<App/>}/>
                </Route>
            </Routes>
        </BrowserRouter>
    </React.StrictMode>,
)
```

## pages/Login.tsx
```tsx
import {Form, Input, Button, Card, Typography, message} from "antd";
import { UserOutlined, LockOutlined } from "@ant-design/icons";
import axios from "axios";

const { Title } = Typography;

export default function Login() {
    const onFinish = async (values: { username: string; password: string }) => {
        try {
            const res = await axios.post("http://localhost:4000/auth/login", values);

            // ✅ AccessToken + RefreshToken 저장
            localStorage.setItem("access_token", res.data.access_token);
            localStorage.setItem("refresh_token", res.data.refresh_token);

            message.success("로그인 성공!");
            setTimeout(() => {
                window.location.href = "/";
            }, 1000);
        } catch (err) {
            const raw = err.response?.data?.message ?? err.message;
            const msg = Array.isArray(raw) ? raw[0] : raw;

            message.error(msg || "아이디 또는 비밀번호를 확인하세요");
        }
    };

    return (
        <div style={{
            height: "100vh", display: "flex", justifyContent: "center", alignItems: "center",
            background: "linear-gradient(135deg, #1677ff 0%, #69c0ff 100%)"
        }}>
            <Card style={{ width: 350, borderRadius: 12, boxShadow: "0 8px 24px rgba(0,0,0,0.2)" }}>
                <div style={{ textAlign: "center", marginBottom: 24 }}>
                    <Title level={3} style={{ marginBottom: 0, color: "#1677ff" }}>
                        MaeJangGo Admin
                    </Title>
                    <p style={{ color: "#888" }}>관리자 로그인</p>
                </div>
                <Form onFinish={onFinish} layout="vertical">
                    <Form.Item name="username" rules={[{ required: true, message: "아이디를 입력하세요" }]}>
                        <Input prefix={<UserOutlined />} placeholder="Username" size="large" />
                    </Form.Item>
                    <Form.Item name="password" rules={[{ required: true, message: "비밀번호를 입력하세요" }]}>
                        <Input.Password prefix={<LockOutlined />} placeholder="Password" size="large" />
                    </Form.Item>
                    <Form.Item>
                        <Button type="primary" htmlType="submit" size="large" block>
                            로그인
                        </Button>
                    </Form.Item>
                </Form>
            </Card>
        </div>
    );
}
```

## App.tsx
```tsx
import Users from "./pages/Users";
import api from "./api/axios.ts"; // axios 설정한 파일 (interceptors 포함)

function App() {
    const handleLogout = async () => {
        try {
            // 서버에 로그아웃 요청 (RefreshToken 무효화)
            await api.post("/auth/logout");
        } catch (err) {
            console.error("로그아웃 에러:", err);
        }

        // 클라이언트 토큰 삭제
        localStorage.removeItem("access_token");
        localStorage.removeItem("refresh_token");

        // 로그인 페이지로 이동
        window.location.href = "/login";
    };

    return (
        <div style={{ padding: "20px" }}>
            <header style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                <h1>Admin Dashboard</h1>
                {/* ✅ 로그아웃 버튼 */}
                <button
                    onClick={handleLogout}
                    style={{
                        padding: "8px 16px",
                        backgroundColor: "#1677ff",
                        color: "white",
                        border: "none",
                        borderRadius: "6px",
                        cursor: "pointer",
                    }}
                >
                    로그아웃
                </button>
            </header>

            <main style={{ marginTop: "20px" }}>
                <Users />
            </main>
        </div>
    );
}

export default App;
```