# [NestJs로 배우는 백엔드 프로그래밍 - 05.데코레이터] 

## 데코레이터란?
```
데코레이터는 클래스나 클래스의 요소(메서드, 속성 등)에 기능을 ‘주석처럼’ 붙여서, 특별한 동작을 하게 만드는 문법입니다.

타입스크립트의 데코레이터는 파이썬의 데코레이터나 자바의 어노테이션과 유사한 기능을 합니다. 
클래스, 메서드, 접근자, 프로퍼티, 매개변수에 적용 가능합니다. 
각 요소의 선언부 앞에 @로 시작하는 데코레이터를 선언하면 데코레이터로 구현된 코드를 함께 실행합니다
```

## 🧩 데코레이터의 종류
| 데코레이터 위치   | 예시                                  | 설명            |
| ---------- | ----------------------------------- | ------------- |
| 클래스 데코레이터  | `@Controller()`, `@Injectable()`    | 클래스 전체에 동작 추가 |
| 메서드 데코레이터  | `@Get()`, `@Post()`, `@UseGuards()` | 특정 함수에 기능 부여  |
| 파라미터 데코레이터 | `@Param()`, `@Body()`, `@Query()`   | 함수 인자에 의미 부여  |
| 속성 데코레이터   | `@Inject()`                         | 클래스 속성에 기능 부여 |

## 🧪 예제 (NestJS 기준)
```ts
import { Controller, Get, Param } from '@nestjs/common';

@Controller('users') // 클래스 데코레이터
export class UserController {
  
  @Get(':id') // 메서드 데코레이터
  getUser(@Param('id') id: string) { // 파라미터 데코레이터
    return `User ID is ${id}`;
  }
}
```
동작 흐름
- @Controller('users'): /users 경로로 매핑
- @Get(':id'): GET /users/:id 요청을 이 메서드에 연결
- @Param('id'): URL 경로에서 id 값을 추출해서 id 변수로 전달

## 🛠️ 데코레이터는 실제로 함수입니다
```ts
function MyDecorator(target: any) {
  console.log("클래스에 데코레이터 적용됨", target);
}

@MyDecorator
class TestClass {}
```
## 🧠 정리: 데코레이터는 왜 쓸까?
| 이유        | 설명                           |
| --------- | ---------------------------- |
| 코드 가독성    | 기능을 시각적으로 명확히 표현             |
| 중복 제거     | 공통 로직을 재사용 가능                |
| 메타프로그래밍   | 런타임에 클래스 정보를 가공 가능           |
| NestJS 필수 | 라우팅, DI, 미들웨어 등 대부분 데코레이터 기반 |

---------------------------------------------------------------------------------
# 자주 사용하는 데코레이터 목록

## 🏗️ 1. 클래스 데코레이터

| 데코레이터           | 설명                                                      |
| --------------- | ------------------------------------------------------- |
| `@Controller()` | 이 클래스를 **라우터 컨트롤러**로 선언함 (`@Get`, `@Post` 등을 사용 가능하게 함) |
| `@Injectable()` | 이 클래스를 **의존성 주입(DI)** 대상 서비스로 등록함                       |
| `@Module()`     | 이 클래스를 **모듈**로 등록 (컨트롤러, 서비스 등을 묶음)                     |
| `@Global()`     | 이 모듈을 앱 전체에서 전역 모듈로 사용하게 함                              |

## 🌐 2. 라우팅(핸들러) 메서드 데코레이터

| 데코레이터       | 설명                  |
| ----------- | ------------------- |
| `@Get()`    | GET 요청을 처리하는 메서드 지정 |
| `@Post()`   | POST 요청 처리          |
| `@Put()`    | PUT 요청 처리           |
| `@Patch()`  | PATCH 요청 처리         |
| `@Delete()` | DELETE 요청 처리        |
| `@All()`    | 모든 HTTP 메서드를 처리     |

## 🧩 3. 라우팅 파라미터 데코레이터

| 데코레이터               | 설명                                    |
| ------------------- | ------------------------------------- |
| `@Param()`          | URL 경로의 파라미터 값을 가져옴 (예: `/users/:id`) |
| `@Query()`          | URL 쿼리스트링 값 추출 (`?name=aaa`)          |
| `@Body()`           | 요청의 body 데이터 가져옴                      |
| `@Headers()`        | 요청의 헤더 가져옴                            |
| `@Req()` / `@Res()` | Express의 요청/응답 객체 직접 접근               |
| `@Ip()`             | 클라이언트 IP 주소 추출                        |

## 🛡️ 4. 기타 데코레이터 (보안, 응답 제어 등)

| 데코레이터                | 설명                                     |
| -------------------- | -------------------------------------- |
| `@UseGuards()`       | 인증/인가를 위한 **Guard**를 적용                |
| `@UsePipes()`        | 유효성 검사/변환을 위한 **Pipe** 적용              |
| `@UseInterceptors()` | 요청/응답 가공을 위한 **Interceptor** 적용        |
| `@HttpCode()`        | 응답 HTTP 상태 코드 설정 (예: `@HttpCode(204)`) |
| `@Redirect()`        | 응답을 리다이렉트 처리                           |
| `@Render()`          | 템플릿 렌더링에 사용 (MVC 방식)                   |

## ✅ 추천 정리 방식 (실무 기준)

| 용도           | 자주 쓰는 데코레이터                                                 |
| ------------ | ----------------------------------------------------------- |
| **라우팅**      | `@Controller`, `@Get`, `@Post`, `@Param`, `@Body`, `@Query` |
| **서비스**      | `@Injectable`, `@Inject`                                    |
| **모듈 구성**    | `@Module`, `@Global`                                        |
| **보안/검증**    | `@UseGuards`, `@UsePipes`, `@UseInterceptors`               |
| **기타 응답 제어** | `@HttpCode`, `@Res`, `@Redirect`                            |
